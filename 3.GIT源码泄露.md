# GIT源码泄露
 本章主要讨论如何从网站拉取GIT并对GIT进行分析，主要使用githack和git工具。
## 工具基础介绍以及实验步骤
### 什么是GIT？
  已经看到这里的读者也许对这个工具不太了解，那么这里赘述一下。在项目开发的时候，需要多人共同完成；有时候我们在开发到某一版本的时候，也需要之前某一版本存在,但是后来被删除的功能；有时候我们开发到数个版本之后，忘记了过去修改了什么。因此我们需要一个工具来帮助我们管理我们的项目，GIT就是这样一个工具。它能够存储之前的版本，并且审查不同开发者的代码是否有冲突，允许管理者对开发者提交的代码进行审核，也会记录每一版本修改了什么内容。因此，如果有一个开发者在开发早期版本时，为了方便，在项目中存了一个administer账号和密码，我们如果在GIT中找到了这个，就可以破解这个密码。
### 利用githack拉取GIT资源并分析。
  查看上一章节我们通过dirsearch发现的资源，可以看到有一系列/.git的文件，这意味着该网站有可能存在git源码泄露风险。我们首先利用githack拉取git资源。githack需要下载，使用pip install githack进行下载。注意，此时我们命令行应当转移到我们想要的位置下再进行githack，用法如下（我放在了桌面）：
####
    cd /home/kali/Desktop
    githack <URL> 
  等待程序运行完毕，我们就会在桌面上发现一个文件夹site：
  ![image](https://github.com/user-attachments/assets/cf1fc6f6-0f70-4154-8bf4-b1886e065038)  
  这个时候我们就已经将该网站的git拉取到本地了，大家可以点开看看site中的内容，这些就是老版本网站的源代码，这下就可以对其进行分析了！我们接下来要用git工具进行分析。
### 利用git指令对GIT资源进行分析
  这些代码很多，我们不可能一个一个去人工读，那么我们就利用git工具进行分析。git工具是一个管理GIT仓库的工具，如何使用GIT涉及GIT的功能，解释起来比较麻烦在这里不再赘述，这里，我们只使用log参数和diff参数，这个两个参数代表的功能分别是展示版本信息和分析各个版本之间的差别。  
####
    cd site/<IP>
    git log
  ![image](https://github.com/user-attachments/assets/36c93059-d0b3-459a-a03e-f52ee2f85d89)  
  在上述代码运行完毕后，可以得到上图所示的结果，黄色部分是提交代码的哈希值，可以理解为一个版本编号，每个版本都有作者和提交时间以及该版本的备注，我们可以看到这个网站有3个版本。此时，我们就要用diff来分析这些版本。
####
    git diff <hash>
  在hash处输入版本号（可以用CTRL+SHIFT+C/V进行复制粘贴），可以得到每个版本修改的内容，我们针对第二个版本a4d900a8d85e8938d3601f3cef113ee293028e10，进行分析查看，结果如下图所示。  
  ![image](https://github.com/user-attachments/assets/822d7e5a-23df-4071-a892-1b9420bfc4c2)  
  我们观察到红色字体和绿色字体，红色字前面有一个-号，意味着在本次修改删除了这一行，接下来绿色的+号说明增加了后面的几行，明显可以看出之前开发者设置一个默认密码使得每次测试不需要重复输入账号和密码，在发布前将其删除，改为读取数据库的账号密码进行验证的模式。因此我们可以尝试使用这个密码来登录界面。  
  回到第一章节我们发现的网址的登录界面，尝试登录：  
  ![image](https://github.com/user-attachments/assets/b29a6ba3-32f5-4975-ab15-fc169814906b)  
  ![image](https://github.com/user-attachments/assets/89758533-584c-4a45-bf00-ef5fe9ac3199)  
  成功登录！

## 实验总结
  这是我们成功破解的第一个密码，但是如果我们把321输入到darkhole虚拟机中，会发现密码依然不对，这是因为这个账号和密码只是这个靶机上构建的一个程序的用户密码而已，我们真正的目标是破解整个靶机并且获得靶机的超级用户权限，但是这依然是我们可喜的第一步！
