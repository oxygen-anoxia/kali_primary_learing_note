# 网络发现与端口扫描
  本篇内容讨论如何发现该网络内有什么设备接入，并扫描其打开的端口。主要用到的工具为：Nmap和netdiscover
## 工具基础介绍
### 利用netdiscover进行网络发现
  netdiscover是通过抓取ARP协议包进行分析来查看该网络下是有什么设备的（ARP协议包内容自行GPT或者回去看计网知识，大致是进行广播搜寻网络内的设备并返回MAC地址）。可以由主动扫描模式（即主动发ARP包）和被动扫描模式（即监听别的终端发送的ARP包）
  #### 主要参数为：
    -i interface 扫描主机的特定网络接口
    -p 进行主动扫描
    -r network/n 扫描特定网段，network即为地址，n即为子网掩码，例：/24即为255.255.255.0。
  但是，必须注意，netdiscover只可以扫描本机所处网段下的设备，不可以扫描到其他网段的设备！
### 利用Nmap进行端口扫描
  Nmap是一个很强大的工具，可以对某一网段进行扫描，也可以对某一主机进行扫描，可以分析目标主机开放的端口，目标主机操作系统等信息，同时支持TCP/UDP等方式的连接测试，也可以进行特定形式输出。
  #### 主要参数为：
    -O 扫描操作系统
    -SV 扫描服务版本
    -A 启用所有高级扫描选项
    该程序默认扫描目标主机的端口，其他的参数就需要大家自己探索了，我也没有特别深入研究
## 实验步骤
  1.首先确认本机与靶机的地址是否在同一网段下（这个的话你得和靶机接入到同一网路中，在本例中作者是在VMware里开了两个虚拟机，与主机利用同一网段（NAT模式），如果不同网段的话你就得想点别的办法了），这个可以通过Windows系统的ipconfig和linux的ifconfig查看。
  2.其次，使用netdiscover对网段进行扫描，具体代码如下：
  #####
    netdiscover -r <ip>
  会跳转到一个新的页面，等待显示完成就好，应该会有一列IP和对应MAC地址
  3.查看这些IP地址，判断目标IP是哪一个，然后利用Nmap进行进一步扫描
  ####
    nmap -O -sV <ip>
  做到这一步之后，稍等十几秒，应当会出来一大坨玩意，里面会显示接口、操作系统类型等，我们比较关注的是对方打开的接口，可以发现靶机打开了80和22接口，分别是http服务和22服务
  ps：我自己试了一下扫自己的主机，是可以扫出来的（注意要使用主机在VMware中的地址，而非你的电脑连入互联网的地址），但是没有发现和网络相关的接口如80或者443，而是数据库接口3306和一些Windows的网络文件共享和设备远程访问的东西如445和139，有可能是被防火墙ban了，也有可能是因为VMware的设置？没太搞明白。要是有明白的读者可以指出。
## 实验总结
  做到这一步，我们相当于是发现了靶机。正如撬锁之前先得找对门牌号，还得看看是砸玻璃还是撬门锁，因此发现靶机和端口是我们进攻的第一步，接下来，我们会学习一些针对可以通过网络接入的分析方式。
